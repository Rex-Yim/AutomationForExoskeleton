================================================================================
System_Design_Summary.txt
SYSTEM DESIGN SUMMARY (Version 1.1)
================================================================================

Date: December 17, 2025

1. EXECUTIVE SUMMARY
The Exoskeleton Control System is a modular software framework designed to 
detect locomotion intent and control a powered lower-limb exoskeleton. It 
utilizes a standard pipeline approach: Sensing -> Fusion -> Perception -> Control.

2. EXECUTION PIPELINE

A. Data Acquisition
   - Input: 3 IMUs (Back, Left Hip, Right Hip).
   - Rate: 100 Hz.
   - Units: Automatically converts G-force to m/sÂ² if detected.
   - Windowing: 1.0-second sliding windows (100 samples) with 50% overlap 
     (50 sample step).

B. Feature Extraction (Updated)
   The system extracts a 5-dimensional feature vector from the IMU window to 
   capture both translational intensity and rotational dynamics:
   1. Mean Acceleration Magnitude: Overall movement energy.
   2. Variance of Acceleration Magnitude: Movement smoothness/regularity.
   3. Mean Gyroscope Magnitude: Rotational velocity intensity.
   4. Variance of Gyroscope Magnitude: Rotational volatility.
   5. Dominant Frequency: Extracted via FFT (Z-axis Acceleration) to detect 
      gait cadence (typically 1-2Hz).

C. Sensor Fusion
   - Algorithm: Kalman Filter (via MATLAB 'imufilter').
   - Reference Frame: East-North-Up (ENU).
   - Tuning: AccNoise=0.01, GyroNoise=0.005.
   - Output: Hip Flexion Angle (Calculated as the relative pitch difference 
     between the Back and Thigh sensors).

D. Classification (SVM)
   - Type: Binary Support Vector Machine.
   - Kernel: Radial Basis Function (RBF).
   - Preprocessing: Standardization (Z-score) applied to handle scaling 
     differences between Acc and Gyro features.
   - Classes: 0 (Standing), 1 (Walking).

E. State Estimation (FSM - Asymmetric Hysteresis)
   To prevent rapid actuator switching ("chattering"), the FSM uses distinct 
   thresholds for entering and exiting states:
   - Entry (Stand -> Walk): Requires 3 consecutive 'Walk' predictions.
   - Exit (Walk -> Stand): Requires 5 consecutive 'Stand' predictions.
   - Safety Logic: The system biases towards maintaining movement assistance 
     to prevent premature stopping during momentary pauses or stumbles.

3. DATA MODEL

Feature Vector:
   features = [mean_acc, var_acc, mean_gyro, var_gyro, dom_freq]
   Size: [1 x 5] double

System State Structure (FSM):
   state = struct(
       'current_state', {0, 1},
       'walk_counter',  int,   % Tracks consecutive walk frames
       'stand_counter', int    % Tracks consecutive stand frames
   );

4. KEY CONFIGURATION (ExoConfig.m)
   - Sampling Rate: 100 Hz
   - Window Size: 100 samples
   - Step Size: 50 samples

5. PERFORMANCE TARGETS
   - Processing Latency: < 50 ms per window.
   - Accuracy: > 98% (Based on 5-Fold CV on USC-HAD).
   - Joint Angle RMSE: < 5 degrees.